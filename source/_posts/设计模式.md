---
title: 设计模式
date: 2021-06-19 13:01:41
tags: 
    - golang
    - 设计模式
categories: 设计模式
---

简述一下各个设计模式，顺便用Golang实现。

# 创建型模式

## 简单工厂模式

根据参数的不同，返回不同类的实例。简单工厂模式定义一个类来负责创建其他类的实例。

Golang的设计理念弱化了面向对象的概念，它没有构造函数的概念，但规范化的代码会使用Newxx的函数来初始化类。

### 简单工厂的优点

- 客户端不需要直接创建对象实例，会有专门的工厂类用于这类工作
- 换句话说，客户端无需知道产品类的类名，只需要知道对应参数，而对应参数名的命名只需要规范，易读
- 可以引入配置文件，在不修改代码的情况下更改产品类。

### 简单工厂的缺点

- 工厂类担负的责任过重，一旦不能工作，整个系统都会被影响
- 增加了系统类的个数，复杂度增加（虽然在工厂模式中是简单的实现）
- 扩展困难，增加新的产品类，就要修改工厂逻辑

![简单工厂demo](https://github.com/Jiaget/notes/blob/main/patterns/simple/simple.go)

## 工厂方法模式

简单方法模式将代码逻辑压力集中在了一个工厂类上面，工厂方法模式显然希望缓解工厂类的压力而设计出来的。

我们会先定义一个抽象工厂类，再定义具体的工厂类来实现不同的产品。这种模式下，当出现新的产品，只需要为这个产品创建一个具体的工厂类即可获取新的实例。

![工厂方法demo](https://github.com/Jiaget/notes/blob/main/patterns/factory_method/factory_method.go)

### 工厂方法优点

- 工厂方法模式中，工厂方法创建产品，并隐藏产品类将被实例化的细节。只需关系产品对应的工厂，无需知道类名。
- 多态，可以使工厂自主确定创建何种产品。所有的具体工厂都有同一个抽象的父类。（Golang实现继承需要通过接口的特性，使用组合来实现。）